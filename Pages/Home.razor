@page "/"

@inject NavigationManager NavigationManager

<PageTitle>Home</PageTitle>

<div class="login-container">
    <h3>Login</h3>
    <div class="form-group">
        <label for="username">Username</label>
        <input id="username" class="form-control" @bind="Username" />
    </div>
    <div class="form-group">
        <label for="password">Password</label>
        <input id="password" class="form-control" type="password" @bind="Password" />
    </div>
    <button type="button" class="btn btn-primary" @onclick="Login">Login</button>
        @if (!string.IsNullOrEmpty(ErrorMessage))
        {
            <p class="error-message">@ErrorMessage</p>
        }

        @if (IsLoggedIn)
        {
            <p>You are logged in!</p>
        }
</div>
<br>
<div class="search-container">
    <input type="text" class="search-input" @bind="SearchQuery" placeholder="Search...">
    <button class="search-button" @onclick="Search">Search</button>
</div>

<style>
    .login-container {
    margin-top: 20px;
    }

    .error-message {
    color: red;
    margin-top: 5px;
    }
</style>

@code {
    private string Username { get; set; }
    private string Password { get; set; }
    private bool IsLoggedIn { get; set; }
    private string ErrorMessage { get; set; }

    private string SearchQuery { get; set; } = "";

    private async Task Search()
    {
        NavigationManager.NavigateTo($"/search/{Uri.EscapeDataString(SearchQuery)}");
        await Task.Delay(0); 
    }

    private async Task Login()
    {

        if (Username == "admin" && Password == "password")
        {
            IsLoggedIn = true;
            ErrorMessage = null;
        }

        else
        {
            IsLoggedIn = false;
            ErrorMessage = "Invalid username or password";
        }
    }
}